# Continue Quartz Hybrid Migration: Custom Components

## Current State

**Completed:**

- ✅ Basic Quartz 4 setup with custom branding
- ✅ 8 blog posts migrated to `content/blog/`
- ✅ Custom SCSS styling created
- ✅ GitHub Actions deployment configured
- ✅ URL aliases preserved from Jekyll redirects

**Missing (Blocking Hybrid Architecture):**

- ❌ BlogListing.tsx component for magazine-style landing page
- ❌ Garden section (`content/garden/` doesn't exist)
- ❌ GardenExplorer.tsx component
- ❌ Blog posts lack `section: blog` frontmatter
- ❌ Layout.ts doesn't use custom components
- ❌ Footer still has default Quartz links

---

## Phase 1: Complete Hybrid Architecture

### Task 1: Create BlogListing Component

**File:** `quartz/components/BlogListing.tsx`

Create a React component that:

- Filters content by `section: blog` frontmatter
- Displays posts in a magazine-style card grid
- Shows featured posts prominently
- Displays post images, titles, dates, descriptions, and tags
- Links to individual blog posts

**Props needed:**

- allFiles (to filter blog posts)
- cfg (for site configuration)

**Styling:**

- Uses existing `.blog-card`, `.featured-grid`, `.post-grid` classes from custom.scss

---

### Task 2: Update Blog Post Frontmatter

**Files:** All files in `content/blog/*.md`

Add `section: blog` to all blog post frontmatter:

```yaml
---
title: "Post Title"
date: 2018-07-21
section: blog # ADD THIS
aliases:
  - old-path
---
```

**Posts to update:**

- the-homelab-tour-part-1-hardware.md
- increase-max-upload-size-in-wordpress.md
- so-i-won-a-drone.md
- collecting-storing-and-presenting-unifi-metrics-with-the-tig-stack-part-1.md
- collecting-storing-and-presenting-unifi-metrics-with-the-tig-stack-part-2.md
- using-acme-sh-for-individual-letsencrypt-certificates.md
- airplay-to-google-home-speakers-or-any-chromecast-enabled-speaker-yes-really.md
- (8th post - verify exact name)

---

### Task 3: Update Layout to Use BlogListing

**File:** `quartz/layout.ts`

Current state: Uses default Quartz layout without custom components

Changes needed:

1. Import BlogListing component
2. Add BlogListing to the index page layout (replace or supplement PageList)
3. Ensure BlogListing only renders on the root index page

**Approach:**

- Add conditional logic: if path is root `/`, use BlogListing; otherwise use default
- Or configure separate layouts for blog vs garden sections

---

### Task 4: Create Garden Section Structure

**Directory:** `content/garden/`

Create the digital garden directory:

```
content/garden/
├── index.md          # Garden landing page
└── (notes will be added here)
```

**content/garden/index.md:**

```markdown
---
title: Digital Garden
description: A living collection of interconnected notes
---

<!-- GardenExplorer component renders here -->
```

---

### Task 5: Create GardenExplorer Component

**File:** `quartz/components/GardenExplorer.tsx`

Create a component that:

- Filters content by `section: garden` frontmatter
- Displays the Graph visualization
- Shows recent garden notes in a list
- Provides a hero section explaining the garden concept

**Note:** Garden notes don't exist yet, but the component should handle empty state gracefully.

---

### Task 6: Customize Footer

**File:** Update or create custom footer component

Replace default Quartz footer links with personal links:

- GitHub: github.com/1activegeek
- Twitter/X: (if applicable)
- RSS feed
- Remove: Quartz GitHub, Discord links

**Options:**

1. Edit existing `quartz/components/Footer.tsx`
2. Create custom footer component and replace in layout.ts

---

### Task 7: Test and Verify

**Local testing:**

```bash
npx quartz build --serve
```

**Verify:**

1. Blog homepage shows magazine-style grid
2. Individual blog posts render correctly
3. Garden section accessible at `/garden/`
4. Footer shows correct links
5. All original URLs still work (aliases preserved)
6. Dark mode works in both sections
7. Mobile responsive design

---

## File Structure After Completion

```
content/
├── index.md                    # Blog landing (uses BlogListing)
├── blog/                       # 8 migrated blog posts with section: blog
├── garden/                     # Digital garden section
│   └── index.md               # Garden landing (uses GardenExplorer)
├── about.md                    # About page
└── img/                        # Images

quartz/
├── components/
│   ├── BlogListing.tsx        # NEW - Magazine grid for blog
│   ├── GardenExplorer.tsx     # NEW - Garden landing with graph
│   └── Footer.tsx             # MODIFIED - Custom links
├── styles/custom.scss         # EXISTING - Theme styles
├── config.ts                  # EXISTING - Quartz config
└── layout.ts                  # MODIFIED - Use custom components
```

---

## Success Criteria

- [ ] Blog homepage displays magazine-style card grid with all 8 posts
- [ ] Featured posts (if any marked) appear prominently
- [ ] Each post shows image, title, date, description, tags
- [ ] Garden section exists and is accessible at `/garden/`
- [ ] Footer contains personal links, not Quartz defaults
- [ ] All 8 blog posts accessible at their original URLs
- [ ] Site builds successfully with `npx quartz build`
- [ ] Hybrid architecture foundation is complete

---

## Next Steps After This Plan

Once the hybrid architecture is complete:

1. **Add sample garden notes** to test the GardenExplorer
2. **Implement Obsidian sync** from the lifeOS vault
3. **Configure frontmatter templates** for new content
4. **Add RSS feed** (blog only)
5. **Optimize performance** and SEO

---

## Critical Files to Modify

| Priority | File                                 | Action                         | Lines of Change      |
| -------- | ------------------------------------ | ------------------------------ | -------------------- |
| 1        | quartz/components/BlogListing.tsx    | Create new                     | ~150 lines           |
| 2        | content/blog/\*.md                   | Add section field              | 8 files, 1 line each |
| 3        | quartz/layout.ts                     | Import & configure BlogListing | ~20 lines            |
| 4        | content/garden/index.md              | Create landing page            | ~10 lines            |
| 5        | quartz/components/GardenExplorer.tsx | Create new                     | ~100 lines           |
| 6        | quartz/components/Footer.tsx         | Customize links                | ~10 lines            |

---

## Risks and Mitigation

**Risk:** Layout changes break existing pages
**Mitigation:** Test locally before deploying, keep backups

**Risk:** BlogListing component doesn't filter correctly
**Mitigation:** Add error handling and empty state display

**Risk:** Section-based routing conflicts with Quartz defaults
**Mitigation:** Test all URLs, ensure aliases still work

---

## Plan Exit Criteria

This plan is ready for implementation. The user should:

1. Review the plan
2. Confirm priority order (BlogListing first, then Garden)
3. Type `/exit` to switch to implementation mode
