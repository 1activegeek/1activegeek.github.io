# Obsidian to GitHub Pages Publishing with Hybrid Blog + Digital Garden

## Executive Summary

Convert existing Jekyll site (1activegeek.github.io) to Quartz 4, preserving all URLs and slugs, then integrate with the lifeOS Obsidian vault to enable **hybrid publishing**: 

- **Blog Section** (`/`) - Magazine-style landing page with curated, visual posts
- **Digital Garden** (`/garden/`) - Interconnected knowledge base with graph view

Content is routed via frontmatter: `section: blog` for editorial content, `section: garden` for interconnected notes.

**Phase 1 Focus**: Jekyll to Quartz migration (existing blog content)
**Phase 2** (Future): Obsidian vault integration for new publishing

---

## Current State Analysis

### Existing Jekyll Site
- **Repository**: `github.com/1activegeek/1activegeek.github.io`
- **Domain**: `1activegeek.com` (custom CNAME configured)
- **Permalink Style**: `/:title/` (slug-based, no dates in URLs)
  - Config: `permalink: ':title/'` in `_config.yml`
- **Posts**: 7 blog posts in `_posts/` with date-prefixed filenames
- **Pages**: About page (`_pages/about.md`), Styleguide (`_pages/_styleguide.md`)
- **Assets**: Images in `/img/` directory
- **Features**: Disqus comments, Google Analytics (UA-97873060-1), tags, pagination
- **Redirects**: Uses `jekyll-redirect-from` plugin for some posts

### URLs to Preserve (Critical)

| Live URL | Jekyll Source | Redirects From |
|----------|---------------|----------------|
| `/the-homelab-tour-part-1-hardware/` | `2018-07-21-the-homelab-tour-part-1-hardware.md` | `/blog/geek/the-homelab-tour-part-1-hardware/`, `/blog/geek/the-homelab-tour-part-1-hardware/` |
| `/increase-max-upload-size-in-wordpress/` | `2018-07-31-increase-max-upload-size-in-wordpress.md` | - |
| `/so-i-won-a-drone/` | `2018-08-27-so-i-won-a-drone.md` | - |
| `/collecting-storing-and-presenting-unifi-metrics-with-the-tig-stack-part-1/` | `2018-09-25-collecting-storing-and-presenting-unifi-metrics-with-the-tig-stack-part-1.md` | - |
| `/collecting-storing-and-presenting-unifi-metrics-with-the-tig-stack-part-2/` | `2018-10-01-collecting-storing-and-presenting-unifi-metrics-with-the-tig-stack-part-2.md` | - |
| `/using-acme-sh-for-individual-letsencrypt-certificates/` | `2018-11-02-using-acme-sh-for-individual-letsencrypt-certificates.md` | - |
| `/airplay-to-google-home-speakers-or-any-chromecast-enabled-speaker-yes-really/` | `2019-04-28-airplay-to-google-home-speakers-or-any-chromecast-enabled-speaker-yes-really.md` | - |
| `/about/` | `_pages/about.md` (explicit `permalink: /about/`) | - |

---

## Target Architecture: Hybrid Blog + Digital Garden

### Overview

A **dual-mode publishing system** that separates content into two distinct experiences:

1. **Blog Section** (`/`) - Magazine-style landing page with curated posts
   - Magazine card-grid layout (like original Jekyll site)
   - Chronological blog posts with featured images
   - Clean, editorial aesthetic
   - Graph view **disabled** here

2. **Digital Garden** (`/garden/`) - Interconnected knowledge base
   - Dense, note-based structure with backlinks
   - "Living document" feel
   - Great for random sharing and reference notes
   - *Note: Graph visualization to be added in future enhancement*

### System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      lifeOS Obsidian Vault                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Frontmatter determines destination:                           â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚    type: blog + publish: true  â†’  Blog Section                 â”‚ â”‚
â”‚  â”‚    type: garden + publish: true â†’ Digital Garden               â”‚ â”‚
â”‚  â”‚    publish: unlisted           â†’  Either section, not indexed  â”‚ â”‚
â”‚  â”‚    (missing/false)             â†’  Private                      â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  Section:                                                      â”‚ â”‚
â”‚  â”‚    section: blog    â†’  Magazine landing page                   â”‚ â”‚
â”‚  â”‚    section: garden  â†’  Garden explorer                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ Sync Script
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                1activegeek/1activegeek.github.io                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Quartz 4 Site                                                  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ content/                                                   â”‚â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ index.md              (Blog landing - magazine grid)   â”‚â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ blog/                                                  â”‚â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â”€ the-homelab-tour-part-1-hardware.md               â”‚â”‚
â”‚  â”‚  â”‚   â”‚   â””â”€â”€ ... (other blog posts)                            â”‚â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ garden/                                                â”‚â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â”€ index.md          (Garden explorer page)          â”‚â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â”€ docker-best-practices.md                          â”‚â”‚
â”‚  â”‚  â”‚   â”‚   â””â”€â”€ ... (interconnected notes)                        â”‚â”‚
â”‚  â”‚  â”‚   â””â”€â”€ about.md                                               â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ quartz/components/BlogListing.tsx  (Magazine grid)        â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ quartz/styles/blog.scss           (Magazine theme)       â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ quartz/styles/garden.scss         (Garden theme)         â”‚â”‚
â”‚  â”‚  â””â”€â”€ .github/workflows/deploy.yml                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ Deploy
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        1activegeek.com                              â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   BLOG SECTION      â”‚    â”‚      DIGITAL GARDEN                 â”‚ â”‚
â”‚  â”‚   (/)               â”‚    â”‚      (/garden/)                     â”‚ â”‚
â”‚  â”‚                     â”‚    â”‚                                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ Featured    â”‚    â”‚    â”‚  â”‚      â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®        â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ Post Card   â”‚    â”‚    â”‚  â”‚     â•±   GRAPH VIEW   â•²       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ with Image  â”‚    â”‚    â”‚  â”‚    â”‚   â•­â”€â”€â”€â”  â•­â”€â”€â”€â”   â”‚      â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚  â”‚    â”‚   â”‚ A â”‚â”€â”€â”‚ B â”‚   â”‚      â”‚   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚  â”‚    â”‚   â•°â”€â”€â”€â”˜  â•°â”€â”€â”€â”˜   â”‚      â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ Post Card 2 â”‚    â”‚    â”‚  â”‚     â•²                â•±       â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚  â”‚      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯        â”‚   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚  â”‚                              â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ Post Card 3 â”‚    â”‚    â”‚  â”‚  Note with [[backlinks]]     â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚  â”‚  and graph connections       â”‚   â”‚ â”‚
â”‚  â”‚                     â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚  Magazine Layout    â”‚    â”‚  Dense, Interconnected             â”‚ â”‚
â”‚  â”‚  Editorial Feel     â”‚    â”‚  Knowledge Base                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  Both sections share the same minimal design system                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Phase 1: Jekyll to Quartz Migration

### 1.1 Initialize Quartz

**Approach A: Fresh Branch (Recommended for Testing)**
```bash
# In the 1activegeek.github.io repo
git checkout -b quartz-migration
git rm -rf .  # Remove all Jekyll files (preserved in master)
# Initialize Quartz here
```

**Approach B: New Repository**
- Create `github.com/1activegeek/blog` or similar
- Keep Jekyll site running until migration complete
- Update CNAME when ready

### 1.2 Frontmatter Strategy: Blog vs Garden

**New Frontmatter Schema for Hybrid System:**

| Field | Values | Purpose |
|-------|--------|---------|
| `publish` | `true` / `false` / `unlisted` | Whether to publish at all |
| `section` | `blog` / `garden` | Which section the content belongs to |
| `slug` | `"custom-path"` | Override URL path |
| `title` | `"Post Title"` | Display title |
| `date` | `YYYY-MM-DD` | Publish date |
| `description` | `"Summary..."` | Preview/excerpt text |
| `tags` | `["tag1", "tag2"]` | Categories |
| `image` | `"filename.jpg"` | Featured image (blog posts) |
| `featured` | `true` / `false` | Highlight on blog landing page |
| `aliases` | `["old-path"]` | Redirects from old URLs |

**Content Routing Logic:**

```yaml
# Blog Post Example - Magazine-style, featured on homepage
---
title: "The Homelab Tour Part 1: Hardware"
date: 2018-07-21
section: blog
publish: true
tags: [homelab, docker, esxi]
description: "Tour of my homelab hardware setup"
image: 2018-07-network-rack.jpeg
featured: true
aliases:
  - blog/geek/the-homelab-tour-part-1-hardware
---
```

```yaml
# Garden Note Example - Interconnected, not in blog index
---
title: "Docker Best Practices"
date: 2026-01-15
section: garden
publish: true
tags: [docker, devops, reference]
description: "Quick reference for Docker patterns"
---
```

```yaml
# Unlisted Example - Accessible but not indexed anywhere
---
title: "Private Note"
section: garden
publish: unlisted
tags: []
---
```

**Jekyll â†’ Quartz Mapping (Updated for Hybrid System)**

| Jekyll | Quartz | Notes |
|--------|--------|-------|
| `layout: post` | `section: blog` | All existing posts become blog section |
| `title: '...'` | `title: "..."` | Preserved |
| `date: 2018-07-21...` | `date: 2018-07-21` | Date only, no time |
| `image: filename.jpg` | `image: filename.jpg` | Preserved for blog posts |
| `tags: [a, b]` | `tags: [a, b]` | Same format |
| `categories: [cat]` | Add to tags | Categories become tags |
| `redirect_from: [paths]` | `aliases: [paths]` | Quartz auto-redirects aliases |
| `permalink: "/about/"` | `permalink: about` | Remove leading/trailing slashes |

**Example Conversion:**

*Jekyll (input):*
```yaml
---
layout: post
title: 'The Homelab Tour Part 1: Hardware'
date: 2018-07-21 13:13:14.000000000 -04:00
image: 2018-07-network-rack.jpeg
categories:
- geek
tags:
- docker
- esxi
- featured
redirect_from:
  - /blog/geek/the-homelab-tour-part-1-hardware
  - /blog/geek/the-homelab-tour-part-1-hardware/
---
```

*Quartz (output):*
```yaml
---
title: "The Homelab Tour Part 1: Hardware"
date: 2018-07-21
section: blog
description: "Tour of my homelab hardware including SuperServers, Ubiquiti, and unRAID"
tags:
  - docker
  - esxi
  - featured
  - geek
image: 2018-07-network-rack.jpeg
featured: true
aliases:
  - blog/geek/the-homelab-tour-part-1-hardware
---

![Network Rack](/img/2018-07-network-rack.jpeg)
```

### 1.3 Content Transformations

**Image Paths:**
- Jekyll: `![]({{ site.baseurl }}/img/filename.jpg)`
- Quartz: `![Alt text](/img/filename.jpg)`

**Internal Links:**
- Jekyll has no native wikilink support
- Quartz supports `[[Note Title]]` format natively
- Convert manually if any exist

**Excerpts:**
- Jekyll uses `<!--more-->` or auto-excerpt
- Quartz uses `description:` frontmatter for previews

### 1.4 Migration Script

**File: `.claude/skills/publish/scripts/migrate_jekyll.py`**

```python
"""
Jekyll to Quartz Migration Script (Hybrid Edition)

Converts:
1. _posts/YYYY-MM-DD-slug.md â†’ content/blog/slug.md (removes date prefix)
2. _pages/*.md â†’ content/*.md
3. Frontmatter fields (redirect_from â†’ aliases, layout â†’ section)
4. Image path references
5. Copy /img/ â†’ content/img/
"""

import os
import re
import yaml
from pathlib import Path
from datetime import datetime

def parse_frontmatter(content):
    """Extract YAML frontmatter from markdown content."""
    pattern = r'^---\s*\n(.*?)\n---\s*\n'
    match = re.match(pattern, content, re.DOTALL)
    if match:
        return yaml.safe_load(match.group(1)), content[match.end():]
    return {}, content

def convert_post_filename(filename):
    """Convert 2018-07-21-slug.md â†’ slug.md"""
    match = re.match(r'\d{4}-\d{2}-\d{2}-(.+)\.md$', filename)
    if match:
        return match.group(1) + '.md'
    return filename

def convert_frontmatter(frontmatter, is_post=True):
    """Convert Jekyll frontmatter to Quartz format for hybrid system."""
    quartz_fm = {}
    
    # Title
    if 'title' in frontmatter:
        quartz_fm['title'] = frontmatter['title']
    
    # Date
    if 'date' in frontmatter:
        if isinstance(frontmatter['date'], datetime):
            quartz_fm['date'] = frontmatter['date'].strftime('%Y-%m-%d')
        else:
            quartz_fm['date'] = str(frontmatter['date'])[:10]
    
    # Section: all existing posts go to blog section
    if is_post:
        quartz_fm['section'] = 'blog'
        # Preserve image for blog posts
        if 'image' in frontmatter:
            quartz_fm['image'] = frontmatter['image']
    
    # Tags (merge categories + tags)
    tags = set()
    if 'tags' in frontmatter:
        tags.update(frontmatter['tags'] if isinstance(frontmatter['tags'], list) else [frontmatter['tags']])
    if 'categories' in frontmatter:
        cats = frontmatter['categories'] if isinstance(frontmatter['categories'], list) else [frontmatter['categories']]
        tags.update(cats)
    if tags:
        quartz_fm['tags'] = sorted(list(tags))
    
    # Redirects â†’ Aliases
    if 'redirect_from' in frontmatter:
        redirects = frontmatter['redirect_from']
        if isinstance(redirects, str):
            redirects = [redirects]
        # Remove leading slashes for Quartz aliases
        quartz_fm['aliases'] = [r.lstrip('/') for r in redirects]
    
    # Explicit permalink
    if 'permalink' in frontmatter:
        perm = frontmatter['permalink'].strip('/')
        quartz_fm['permalink'] = perm
    
    return quartz_fm

def convert_content(content_body):
    """Convert content body (image paths, etc.)."""
    # Remove Jekyll image frontmatter and convert to markdown image
    # Fix {{ site.baseurl }} references
    content_body = re.sub(r'\{\{\s*site\.baseurl\s*\}\}', '', content_body)
    return content_body

def migrate_jekyll_to_quartz(jekyll_repo, quartz_repo):
    """Main migration function."""
    # Create content directories
    blog_dir = Path(quartz_repo) / 'content' / 'blog'
    garden_dir = Path(quartz_repo) / 'content' / 'garden'
    blog_dir.mkdir(parents=True, exist_ok=True)
    garden_dir.mkdir(parents=True, exist_ok=True)
    
    # Migrate posts to blog section
    posts_dir = Path(jekyll_repo) / '_posts'
    for post_file in posts_dir.glob('*.md'):
        with open(post_file, 'r') as f:
            content = f.read()
        
        frontmatter, body = parse_frontmatter(content)
        quartz_fm = convert_frontmatter(frontmatter, is_post=True)
        new_body = convert_content(body)
        
        # Write to blog/ directory
        new_filename = convert_post_filename(post_file.name)
        output_path = blog_dir / new_filename
        
        with open(output_path, 'w') as f:
            f.write('---\n')
            yaml.dump(quartz_fm, f, default_flow_style=False, allow_unicode=True, sort_keys=False)
            f.write('---\n\n')
            f.write(new_body)
    
    # Migrate pages
    pages_dir = Path(jekyll_repo) / '_pages'
    content_dir = Path(quartz_repo) / 'content'
    for page_file in pages_dir.glob('*.md'):
        if page_file.name.startswith('_'):  # Skip internal files like _styleguide
            continue
        
        with open(page_file, 'r') as f:
            content = f.read()
        
        frontmatter, body = parse_frontmatter(content)
        quartz_fm = convert_frontmatter(frontmatter, is_post=False)
        new_body = convert_content(body)
        
        output_path = content_dir / page_file.name
        with open(output_path, 'w') as f:
            f.write('---\n')
            yaml.dump(quartz_fm, f, default_flow_style=False, allow_unicode=True, sort_keys=False)
            f.write('---\n\n')
            f.write(new_body)
    
    # Copy images
    img_src = Path(jekyll_repo) / 'img'
    img_dst = Path(quartz_repo) / 'content' / 'img'
    if img_src.exists():
        img_dst.mkdir(parents=True, exist_ok=True)
        for img_file in img_src.glob('*'):
            shutil.copy2(img_file, img_dst / img_file.name)
```

### 1.5 Hybrid Folder Structure

**Quartz Content Organization:**

```
content/
â”œâ”€â”€ index.md                    # Blog landing page (magazine grid)
â”œâ”€â”€ blog/                       # Blog posts section
â”‚   â”œâ”€â”€ index.md               # Blog section landing (optional)
â”‚   â”œâ”€â”€ the-homelab-tour-part-1-hardware.md
â”‚   â”œâ”€â”€ increase-max-upload-size-in-wordpress.md
â”‚   â””â”€â”€ ... (other migrated posts)
â”œâ”€â”€ garden/                     # Digital Garden section
â”‚   â”œâ”€â”€ index.md               # Garden explorer with graph
â”‚   â”œâ”€â”€ docker-best-practices.md
â”‚   â”œâ”€â”€ random-thoughts.md
â”‚   â””â”€â”€ ... (interconnected notes)
â”œâ”€â”€ about.md                    # About page
â””â”€â”€ img/                        # Shared assets
    â”œâ”€â”€ 2018-07-network-rack.jpeg
    â””â”€â”€ ...
```

**URL Structure:**

| Content | URL | Section |
|---------|-----|---------|
| Blog Landing | `/` | Magazine grid |
| Blog Post | `/blog/post-slug/` | Magazine layout |
| Garden Landing | `/garden/` | Graph + explorer |
| Garden Note | `/garden/note-slug/` | Interconnected |
| About | `/about/` | Simple page |

**Quartz Configuration with Section Support**

**File: `quartz.config.ts`**

```typescript
import { QuartzConfig } from "./quartz/cfg"
import * as Plugin from "./quartz/plugins"

const config: QuartzConfig = {
  configuration: {
    pageTitle: "1activegeek",
    pageTitleSuffix: "",
    enableSPA: true,
    enablePopovers: true,
    analytics: {
      provider: "google",
      tagId: "UA-97873060-1",
    },
    locale: "en-US",
    baseUrl: "1activegeek.com",
    ignorePatterns: ["private", "templates", ".obsidian"],
    defaultDateType: "created",
    theme: {
      fontOrigin: "googleFonts",
      cdnCaching: true,
      typography: {
        header: "Inter",
        body: "Inter",
        code: "JetBrains Mono",
      },
      colors: {
        lightMode: {
          light: "#fafafa",
          lightgray: "#e5e5e5",
          gray: "#737373",
          darkgray: "#262626",
          dark: "#171717",
          secondary: "#0066cc",
          tertiary: "#4d9fff",
          highlight: "rgba(0, 102, 204, 0.15)",
          textHighlight: "#fff23688",
        },
        darkMode: {
          light: "#0a0a0a",
          lightgray: "#262626",
          gray: "#a3a3a3",
          darkgray: "#d4d4d4",
          dark: "#f5f5f5",
          secondary: "#4d9fff",
          tertiary: "#0066cc",
          highlight: "rgba(77, 159, 255, 0.15)",
          textHighlight: "#b3aa0288",
        },
      },
    },
  },
  plugins: {
    transformers: [
      Plugin.FrontMatter(),
      Plugin.CreatedModifiedDate({
        priority: ["frontmatter", "filesystem"],
      }),
      Plugin.SyntaxHighlighting({
        theme: {
          light: "github-light",
          dark: "github-dark",
        },
        keepBackground: false,
      }),
      Plugin.ObsidianFlavoredMarkdown({ enableInHtmlEmbed: false }),
      Plugin.GitHubFlavoredMarkdown(),
      Plugin.TableOfContents(),
      Plugin.CrawlLinks({ markdownLinkResolution: "shortest" }),
      Plugin.Description(),
      Plugin.Latex({ renderEngine: "katex" }),
    ],
    filters: [
      Plugin.RemoveDrafts(),
    ],
    emitters: [
      Plugin.AliasRedirects(),
      Plugin.ComponentResources(),
      Plugin.ContentPage(),
      Plugin.FolderPage(),
      Plugin.TagPage(),
      Plugin.ContentIndex({
        enableSiteMap: true,
        enableRSS: true,
      }),
      Plugin.Assets(),
      Plugin.Static(),
      Plugin.NotFoundPage(),
    ],
  },
}

export default config
```

### 1.6 Custom Theme Design (Hybrid Edition)

**Modern Minimal Aesthetic Goals:**
- Clean, spacious layout with generous whitespace
- High-contrast, readable typography (Inter font family)
- Snappy interactions (<100ms transitions)
- Mobile-first responsive design
- Subtle depth through shadows and hover states
- **Dual personality**: Magazine editorial for blog, dense interconnected for garden

**File: `quartz/styles/custom.scss`**

```scss
// ============================================
// 1activegeek Custom Theme for Quartz 4
// Modern, minimal, responsive - Hybrid Blog + Garden
// ============================================

// Import Inter font
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

// ============================================
// CSS Custom Properties
// ============================================
:root {
  // Layout
  --content-max-width: 720px;
  --page-padding: 2rem;
  --section-spacing: 3rem;
  
  // Typography
  --font-sans: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  --font-mono: "JetBrains Mono", "Fira Code", monospace;
  
  // Animation
  --transition-fast: 0.1s ease;
  --transition-medium: 0.2s ease;
  
  // Shadows
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

// ============================================
// Light Mode Overrides
// ============================================
[data-theme="light"] {
  --bg: #fafafa;
  --fg: #171717;
  --muted: #737373;
  --border: #e5e5e5;
  --card-bg: #ffffff;
  --accent: #0066cc;
  --accent-hover: #0052a3;
}

// ============================================
// Dark Mode Overrides
// ============================================
[data-theme="dark"] {
  --bg: #0a0a0a;
  --fg: #f5f5f5;
  --muted: #a3a3a3;
  --border: #262626;
  --card-bg: #171717;
  --accent: #4d9fff;
  --accent-hover: #6cb3ff;
}

// ============================================
// Base Styles
// ============================================
body {
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// ============================================
// Page Layout
// ============================================
.page {
  max-width: var(--content-max-width);
  margin: 0 auto;
  padding: var(--page-padding);
}

// ============================================
// Blog Section Styles (Magazine Editorial)
// ============================================

// Article/Blog Post Styles
article {
  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    letter-spacing: -0.025em;
    margin-top: var(--section-spacing);
    margin-bottom: 1rem;
    
    &:first-child {
      margin-top: 0;
    }
  }
  
  h1 {
    font-size: 2.25rem;
    line-height: 1.2;
  }
  
  h2 {
    font-size: 1.5rem;
    line-height: 1.3;
    border-bottom: 1px solid var(--border);
    padding-bottom: 0.5rem;
  }
  
  p {
    line-height: 1.75;
    margin-bottom: 1.25rem;
  }
  
  img {
    border-radius: 8px;
    box-shadow: var(--shadow-md);
  }
}

// Blog Listing Page - Magazine Grid
.blog-list {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.blog-card {
  padding: 1.5rem;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--card-bg);
  transition: transform var(--transition-fast), 
              box-shadow var(--transition-fast);
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }
  
  // Featured posts (larger)
  &.featured {
    padding: 2rem;
    
    img {
      width: 100%;
      height: 300px;
      object-fit: cover;
      margin-bottom: 1.5rem;
    }
    
    h3 {
      font-size: 1.75rem;
    }
  }
  
  h2, h3 {
    margin: 0 0 0.5rem 0;
    border: none;
    padding: 0;
  }
  
  img {
    width: 100%;
    max-height: 200px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 1rem;
  }
  
  .meta {
    font-size: 0.875rem;
    color: var(--muted);
    margin-bottom: 0.75rem;
  }
  
  .excerpt {
    color: var(--muted);
    line-height: 1.6;
  }
  
  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1rem;
    
    .tag {
      font-size: 0.75rem;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      background: var(--bg);
      color: var(--fg);
      text-decoration: none;
      transition: background var(--transition-fast);
      
      &:hover {
        background: var(--border);
      }
    }
  }
}

// Featured Grid (2 columns on desktop)
.featured-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 2rem;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
  
  .blog-card:first-child {
    grid-column: 1 / -1; // Full width first featured
  }
}

// Regular post grid
.post-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
}

// ============================================
// Navigation
// ============================================
nav {
  padding: 1rem var(--page-padding);
  border-bottom: 1px solid var(--border);
  
  .nav-content {
    max-width: var(--content-max-width);
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .logo {
    font-weight: 700;
    font-size: 1.25rem;
    text-decoration: none;
    color: var(--fg);
    
    &:hover {
      color: var(--accent);
    }
  }
  
  .nav-links {
    display: flex;
    gap: 1.5rem;
    
    a {
      font-size: 0.875rem;
      font-weight: 500;
      text-decoration: none;
      color: var(--muted);
      transition: color var(--transition-fast);
      
      &:hover {
        color: var(--fg);
      }
      
      // Active link styling
      &[aria-current="page"] {
        color: var(--accent);
      }
    }
  }
}

// ============================================
// Digital Garden Styles (Dense, Interconnected)
// ============================================

// Garden landing page with graph
.garden-landing {
  max-width: 900px; // Slightly wider for garden
  
  .hero {
    text-align: center;
    padding: 3rem 1rem;
    margin-bottom: 2rem;
    
    h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    
    p {
      font-size: 1.125rem;
      color: var(--muted);
      max-width: 600px;
      margin: 0 auto;
    }
  }
  
  // Graph container styling
  .graph-container {
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.5rem;
    background: var(--card-bg);
    margin-bottom: 3rem;
    
    .graph-title {
      font-size: 0.875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--muted);
      margin-bottom: 1rem;
    }
  }
  
  // Recent notes list
  .recent-notes {
    h2 {
      font-size: 1.25rem;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--border);
    }
    
    .note-list {
      display: grid;
      gap: 1rem;
    }
    
    .note-item {
      padding: 1rem;
      border: 1px solid var(--border);
      border-radius: 8px;
      text-decoration: none;
      color: var(--fg);
      transition: border-color var(--transition-fast),
                  background var(--transition-fast);
      
      &:hover {
        border-color: var(--accent);
        background: var(--bg);
      }
      
      .note-title {
        font-weight: 600;
        margin-bottom: 0.25rem;
      }
      
      .note-meta {
        font-size: 0.875rem;
        color: var(--muted);
      }
    }
  }
}

// Garden note pages - dense, interconnected
.garden-note {
  // Smaller max-width for garden (easier to scan)
  max-width: 800px;
  
  // More compact typography
  p {
    line-height: 1.6;
    margin-bottom: 1rem;
  }
  
  // Prominent backlinks section
  .backlinks {
    background: var(--card-bg);
    padding: 1.5rem;
    border-radius: 12px;
    border: 1px solid var(--border);
    margin-top: 3rem;
    
    h3 {
      font-size: 1.125rem;
      margin-bottom: 1rem;
      color: var(--accent);
    }
  }
  
  // Wikilinks styling (when in garden)
  a.internal-link {
    color: var(--accent);
    text-decoration: none;
    border-bottom: 1px dotted var(--accent);
    
    &:hover {
      border-bottom-style: solid;
    }
  }
  
  // Growth stage badges
  .growth-stage {
    display: inline-block;
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    margin-bottom: 1rem;
    
    &.seedling {
      background: #dcfce7;
      color: #166534;
    }
    
    &.budding {
      background: #fef3c7;
      color: #92400e;
    }
    
    &.evergreen {
      background: #dbeafe;
      color: #1e40af;
    }
  }
}

// ============================================
// Backlinks (Shared but styled differently per section)
// ============================================
.backlinks {
  margin-top: var(--section-spacing);
  padding-top: 2rem;
  border-top: 1px solid var(--border);
  
  h3 {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }
  
  .backlink-list {
    display: grid;
    gap: 0.75rem;
  }
  
  .backlink {
    padding: 0.75rem;
    border-radius: 8px;
    background: var(--card-bg);
    border: 1px solid var(--border);
    text-decoration: none;
    color: var(--fg);
    transition: border-color var(--transition-fast);
    
    &:hover {
      border-color: var(--accent);
    }
  }
}

// ============================================
// Mobile Responsive
// ============================================
@media (max-width: 768px) {
  :root {
    --page-padding: 1rem;
    --section-spacing: 2rem;
  }
  
  article {
    h1 {
      font-size: 1.75rem;
    }
    
    h2 {
      font-size: 1.25rem;
    }
  }
  
  .blog-card {
    padding: 1rem;
    
    h2, h3 {
      font-size: 1.25rem;
    }
    
    &.featured {
      padding: 1.5rem;
      
      img {
        height: 200px;
      }
      
      h3 {
        font-size: 1.5rem;
      }
    }
  }
  
  .featured-grid {
    gap: 1rem;
  }
  
  .post-grid {
    grid-template-columns: 1fr;
  }
  
  nav {
    .nav-links {
      gap: 1rem;
    }
  }
  
  .garden-landing {
    .hero {
      padding: 2rem 1rem;
      
      h1 {
        font-size: 2rem;
      }
    }
  }
}

// ============================================
// Graph View Customization
// ============================================
.graph-outer {
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--card-bg);
  
  // Hide graph on blog posts (keep on garden pages)
  .blog-post & {
    display: none;
  }
}
```

### 1.7 GitHub Actions Workflow

**File: `.github/workflows/deploy.yml`**

```yaml
name: Deploy Quartz site to GitHub Pages

on:
  push:
    branches:
      - v4
      - main
      - master

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Full history for git dates

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 22

      - name: Install Dependencies
        run: npm ci

      - name: Build Quartz
        run: npx quartz build

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: public

  deploy:
    needs: build
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

### 1.8 Custom Quartz Components (Hybrid Layout)

**File: `quartz/components/BlogListing.tsx`**

Custom React component for the magazine-style blog landing page:

```tsx
import { QuartzComponent, QuartzComponentConstructor, QuartzComponentProps } from "./types"
import { FullSlug, simplifySlug } from "../util/path"

interface BlogOptions {
  showFeatured: boolean
  showTags: boolean
}

const defaultOptions: BlogOptions = {
  showFeatured: true,
  showTags: true,
}

export default ((opts?: BlogOptions) => {
  const options = { ...defaultOptions, ...opts }

  const BlogListing: QuartzComponent = ({
    allFiles,
    cfg,
  }: QuartzComponentProps) => {
    // Filter for blog posts only (section: blog)
    const blogPosts = allFiles.filter(
      (file) => file.frontmatter?.section === "blog" && file.frontmatter?.publish !== "unlisted"
    )

    // Sort by date descending
    const sortedPosts = blogPosts.sort(
      (a, b) => (b.dates?.created || 0) - (a.dates?.created || 0)
    )

    // Separate featured posts
    const featuredPosts = sortedPosts.filter((p) => p.frontmatter?.featured)
    const regularPosts = sortedPosts.filter((p) => !p.frontmatter?.featured)

    return (
      <div class="blog-listing">
        {options.showFeatured && featuredPosts.length > 0 && (
          <section class="featured-posts">
            <h2>Featured</h2>
            <div class="featured-grid">
              {featuredPosts.map((post) => (
                <article class="blog-card featured">
                  {post.frontmatter?.image && (
                    <img src={`/img/${post.frontmatter.image}`} alt={post.frontmatter.title} />
                  )}
                  <h3>
                    <a href={post.slug}>{post.frontmatter?.title}</a>
                  </h3>
                  <div class="meta">
                    {post.dates?.created && (
                      <time>{new Date(post.dates.created).toLocaleDateString()}</time>
                    )}
                  </div>
                  {post.description && <p class="excerpt">{post.description}</p>}
                </article>
              ))}
            </div>
          </section>
        )}

        <section class="recent-posts">
          <h2>Recent Posts</h2>
          <div class="post-grid">
            {regularPosts.map((post) => (
              <article class="blog-card">
                {post.frontmatter?.image && (
                  <img src={`/img/${post.frontmatter.image}`} alt={post.frontmatter.title} />
                )}
                <h3>
                  <a href={post.slug}>{post.frontmatter?.title}</a>
                </h3>
                <div class="meta">
                  {post.dates?.created && (
                    <time>{new Date(post.dates.created).toLocaleDateString()}</time>
                  )}
                </div>
                {post.description && <p class="excerpt">{post.description}</p>}
                {options.showTags && post.frontmatter?.tags && (
                  <div class="tags">
                    {post.frontmatter.tags.map((tag: string) => (
                      <span class="tag">{tag}</span>
                    ))}
                  </div>
                )}
              </article>
            ))}
          </div>
        </section>
      </div>
    )
  }

  return BlogListing
}) satisfies QuartzComponentConstructor
```

**File: `quartz/components/GardenExplorer.tsx`**

Component for the digital garden landing page with graph:

```tsx
import { QuartzComponent, QuartzComponentConstructor, QuartzComponentProps } from "./types"
import Graph from "./Graph"

export default (() => {
  const GardenExplorer: QuartzComponent = ({
    allFiles,
    cfg,
  }: QuartzComponentProps) => {
    // Filter for garden notes
    const gardenNotes = allFiles.filter(
      (file) => file.frontmatter?.section === "garden"
    )

    // Sort by modified date
    const sortedNotes = gardenNotes.sort(
      (a, b) => (b.dates?.modified || 0) - (a.dates?.modified || 0)
    )

    return (
      <div class="garden-landing">
        <section class="hero">
          <h1>Digital Garden</h1>
          <p>
            A living collection of notes, thoughts, and references. 
            Explore the interconnected web of ideas below.
          </p>
        </section>

        <section class="graph-container">
          <div class="graph-title">Knowledge Graph</div>
          <Graph />
        </section>

        <section class="recent-notes">
          <h2>Recently Cultivated</h2>
          <div class="note-list">
            {sortedNotes.slice(0, 10).map((note) => (
              <a href={note.slug} class="note-item">
                <div class="note-title">{note.frontmatter?.title}</div>
                <div class="note-meta">
                  {note.dates?.modified && (
                    <span>Updated {new Date(note.dates.modified).toLocaleDateString()}</span>
                  )}
                </div>
              </a>
            ))}
          </div>
        </section>
      </div>
    )
  }

  return GardenExplorer
}) satisfies QuartzComponentConstructor
```

**File: `content/index.md` (Blog Landing Page)**

```markdown
---
title: 1activegeek
description: The geek with an active lifestyle
---

## Recent Posts

<!-- BlogListing component renders here -->
```

**File: `content/garden/index.md` (Garden Landing Page)**

```markdown
---
title: Digital Garden
description: A living collection of interconnected notes
---

<!-- GardenExplorer component renders here -->
```

---

## Phase 2: Obsidian Integration

### 2.1 Update Vault Templates

**Modify: `3 Resources/Templates/Template - New Note.md`**

```yaml
---
created: <% tp.file.creation_date("YYYY-MM-DD") %>
description:
status:
type:
tags:
connections:
publish: false        # true = publish, unlisted = shareable link, false = private
section:              # "blog" or "garden" (when publishing)
slug:                 # Optional custom URL (defaults to filename)
---
```

**Create: `3 Resources/Templates/Template - Blog Post.md`**

```yaml
---
created: <% tp.file.creation_date("YYYY-MM-DD") %>
description:
type: blog
tags:
  - 
connections:
publish: true         # Published to site
section: blog         # Appears in magazine-style blog
slug:                 # Optional: override URL
featured: false       # true = highlight on homepage
image:                # Featured image filename (from _assets/)
---

# <% tp.file.title %>

## Summary

Brief summary for the blog listing...

## Main Content

Your blog post content here...

## Tags

#<% tp.file.creation_date("YYYY") %> #<% tp.file.creation_date("MM") %> #blog
```

**Create: `3 Resources/Templates/Template - Garden Note.md`**

```yaml
---
created: <% tp.file.creation_date("YYYY-MM-DD") %>
description:
type: garden
tags:
  - 
connections:
publish: true         # Published to site
section: garden       # Appears in digital garden
slug:                 # Optional: override URL
---

# <% tp.file.title %>

## Context

Brief context or purpose of this note...

## Content

Your interconnected note content here...
Use [[Wikilinks]] to connect to other notes.

## Connections

- Related: [[Related Note]]
- Tags: #seedling #evergreen

---

**Growth Stage**: ğŸŒ± Seedling | ğŸŒ¿ Budding | ğŸŒ³ Evergreen
```

### 2.2 Create Publishing Skill

**Directory: `.claude/skills/publish/`**

**SKILL.md:**
```markdown
---
name: publish
description: Sync publishable notes from Obsidian vault to Quartz blog. Use when asked to publish notes or sync blog content.
---

# Publish Skill

Sync notes with `publish: true` or `publish: unlisted` from the Obsidian vault to the Quartz blog at 1activegeek.github.io.

## Quick Start

```bash
# Full sync
python3 .claude/skills/publish/scripts/sync_to_quartz.py

# Sync specific file
python3 .claude/skills/publish/scripts/sync_to_quartz.py --file "path/to/note.md"

# Dry run (preview changes)
python3 .claude/skills/publish/scripts/sync_to_quartz.py --dry-run
```

## Workflow

1. **Scan**: Find all notes with `publish: true` or `publish: unlisted` in frontmatter
2. **Route**: Determine section based on `section` field (blog/garden)
3. **Process**: Convert wikilinks to standard markdown, copy assets
4. **Sync**: Copy processed notes to appropriate Quartz directory:
   - `section: blog` â†’ `content/blog/`
   - `section: garden` â†’ `content/garden/`
5. **Deploy**: Commit and push to GitHub (triggers GitHub Actions build)

## Frontmatter Fields

- `publish: true` - Publish the note
- `publish: unlisted` - Published but not indexed in blog/garden listings
- `section: blog` - Route to blog section (magazine-style)
- `section: garden` - Route to garden section (interconnected notes)
- `slug: "custom-url"` - Override the URL path
- `featured: true` - Highlight on blog homepage (blog posts only)
- `image: "filename.jpg"` - Featured image (blog posts only)

## Configuration

Edit `.claude/skills/publish/config.yaml` to customize:
- Quartz repository path
- Excluded folders
- Asset handling
```

**config.yaml:**
```yaml
# Publishing configuration
quartz_repo: ~/Projects/1activegeek.github.io  # Path to local Quartz repo
content_dir: content                            # Quartz content directory
blog_dir: content/blog                          # Blog posts directory
garden_dir: content/garden                      # Garden notes directory
assets_dir: content/img                         # Where to place images
vault_assets:                                   # Obsidian asset folders to scan
  - _assets
  - img

# Publishing behavior
default_slug_from_title: true                   # Use title for slug if no slug specified
unlisted_in_index: false                        # Unlisted posts hidden from listings
preserve_draft_status: false                    # Keep publish: false in Quartz or remove

# Exclusions (paths relative to vault root)
excluded_folders:
  - 4 Archives
  - .obsidian
  - .smart-env
  - .claude
excluded_files:
  - "README.md"
  - "CHANGELOG.md"
  - "LICENSE.md"

# Sync options
copy_mode: symlink                              # Options: copy, symlink, hardlink
git_auto_commit: true                           # Auto-commit and push
git_commit_message: "Sync from Obsidian vault: {date}"
```

### 2.3 Sync Script

**File: `.claude/skills/publish/scripts/sync_to_quartz.py`**

```python
#!/usr/bin/env python3
"""
Sync publishable notes from Obsidian vault to Quartz blog (Hybrid Edition).

Features:
- Scans vault for publish: true/unlisted frontmatter
- Routes to blog/ or garden/ based on section field
- Converts wikilinks [[Note]] â†’ [Note](note.md)
- Handles embedded images ![[image.png]] â†’ ![alt](/img/image.png)
- Copies referenced assets to Quartz assets dir
- Generates slugs from title if not specified
- Preserves existing Quartz content structure
"""

import argparse
import yaml
import re
import shutil
from pathlib import Path
from datetime import datetime
from typing import Dict, List, Tuple, Optional

class VaultSync:
    def __init__(self, config_path: str):
        with open(config_path) as f:
            self.config = yaml.safe_load(f)
        
        self.vault_root = Path.home() / "Library/Mobile Documents/iCloud~md~obsidian/Documents/lifeOS"
        self.quartz_root = Path(self.config['quartz_repo']).expanduser()
        self.blog_dir = self.quartz_root / self.config['blog_dir']
        self.garden_dir = self.quartz_root / self.config['garden_dir']
        self.assets_dir = self.quartz_root / self.config['assets_dir']
        
        # Ensure directories exist
        self.blog_dir.mkdir(parents=True, exist_ok=True)
        self.garden_dir.mkdir(parents=True, exist_ok=True)
        self.assets_dir.mkdir(parents=True, exist_ok=True)
    
    def find_publishable_notes(self) -> List[Path]:
        """Find all notes with publish: true or publish: unlisted."""
        publishable = []
        
        for md_file in self.vault_root.rglob("*.md"):
            # Skip excluded folders
            if any(excluded in str(md_file) for excluded in self.config['excluded_folders']):
                continue
            
            # Skip excluded files
            if md_file.name in self.config['excluded_files']:
                continue
            
            frontmatter = self._parse_frontmatter(md_file)
            publish_value = frontmatter.get('publish', False)
            
            if publish_value in [True, 'true', 'unlisted']:
                publishable.append(md_file)
        
        return publishable
    
    def _parse_frontmatter(self, file_path: Path) -> Dict:
        """Extract YAML frontmatter from markdown file."""
        content = file_path.read_text()
        match = re.match(r'^---\s*\n(.*?)\n---\s*\n', content, re.DOTALL)
        if match:
            return yaml.safe_load(match.group(1)) or {}
        return {}
    
    def _extract_wikilinks(self, content: str) -> List[Tuple[str, str]]:
        """Find all wikilinks in content."""
        # [[Note Title]] or [[Note Title|Display Text]]
        pattern = r'\[\[([^\]|]+)(?:\|([^\]]+))?\]\]'
        return re.findall(pattern, content)
    
    def _convert_wikilinks(self, content: str, section: str, note_path: Path) -> str:
        """Convert wikilinks to standard markdown links with correct paths."""
        def replace_link(match):
            target = match.group(1)
            display = match.group(2) or target
            # Convert to slug
            target_slug = target.lower().replace(' ', '-')
            
            # For garden notes, links stay in garden/
            # For blog posts, we need to check if linking to garden or blog
            # This is simplified - assumes all internal links are garden notes
            if section == 'garden':
                return f'[{display}]({target_slug})'
            else:
                # Blog posts might link to garden
                return f'[{display}](../garden/{target_slug})'
        
        return re.sub(r'\[\[([^\]|]+)(?:\|([^\]]+))?\]\]', replace_link, content)
    
    def _convert_embeds(self, content: str, note_path: Path) -> Tuple[str, List[Path]]:
        """Convert embedded images and return list of assets to copy."""
        assets_to_copy = []
        
        def replace_embed(match):
            target = match.group(1)
            # Find the asset file
            for asset_folder in self.config['vault_assets']:
                # Check relative to note
                asset_path = note_path.parent / asset_folder / target
                if asset_path.exists():
                    assets_to_copy.append(asset_path)
                    return f'![{target}](/img/{target})'
                
                # Check in vault root
                asset_path = self.vault_root / asset_folder / target
                if asset_path.exists():
                    assets_to_copy.append(asset_path)
                    return f'![{target}](/img/{target})'
            
            # If not found, return as-is with warning
            print(f"âš ï¸  Warning: Asset not found: {target} (in {note_path})")
            return match.group(0)
        
        new_content = re.sub(r'!\[\[([^\]]+)\]\]', replace_embed, content)
        return new_content, assets_to_copy
    
    def _get_slug(self, frontmatter: Dict, file_path: Path) -> str:
        """Determine slug for the note."""
        if 'slug' in frontmatter:
            return frontmatter['slug'].strip('/')
        
        if self.config['default_slug_from_title'] and 'title' in frontmatter:
            return frontmatter['title'].lower().replace(' ', '-')
        
        # Use filename without extension
        return file_path.stem.lower().replace(' ', '-')
    
    def _get_output_dir(self, frontmatter: Dict) -> Path:
        """Determine output directory based on section field."""
        section = frontmatter.get('section', 'blog')  # Default to blog
        
        if section == 'garden':
            return self.garden_dir
        else:
            return self.blog_dir
    
    def process_note(self, note_path: Path) -> Tuple[str, str, Path, List[Path]]:
        """
        Process a single note for publishing.
        Returns: (slug, processed_content, output_dir, assets_to_copy)
        """
        content = note_path.read_text()
        frontmatter, body = self._parse_full_content(content)
        
        # Get section and output directory
        section = frontmatter.get('section', 'blog')
        output_dir = self._get_output_dir(frontmatter)
        
        # Convert content
        body = self._convert_wikilinks(body, section, note_path)
        body, assets = self._convert_embeds(body, note_path)
        
        slug = self._get_slug(frontmatter, note_path)
        
        # Prepare frontmatter for Quartz
        quartz_fm = {
            'title': frontmatter.get('title', note_path.stem),
            'date': frontmatter.get('created', datetime.now().strftime('%Y-%m-%d')),
            'description': frontmatter.get('description', ''),
            'tags': frontmatter.get('tags', []),
            'section': section,
        }
        
        # Add blog-specific fields
        if section == 'blog':
            if 'image' in frontmatter:
                quartz_fm['image'] = frontmatter['image']
            if 'featured' in frontmatter:
                quartz_fm['featured'] = frontmatter['featured']
        
        # Handle publish status
        if frontmatter.get('publish') == 'unlisted':
            quartz_fm['unlisted'] = True
        
        # Reconstruct content
        processed = '---\n'
        processed += yaml.dump(quartz_fm, default_flow_style=False, allow_unicode=True, sort_keys=False)
        processed += '---\n\n'
        processed += body
        
        return slug, processed, output_dir, assets
    
    def _parse_full_content(self, content: str) -> Tuple[Dict, str]:
        """Parse frontmatter and body from content."""
        match = re.match(r'^---\s*\n(.*?)\n---\s*\n(.*)', content, re.DOTALL)
        if match:
            return yaml.safe_load(match.group(1)) or {}, match.group(2)
        return {}, content
    
    def sync(self, dry_run: bool = False, specific_file: Optional[Path] = None):
        """Run the sync operation."""
        if specific_file:
            notes = [specific_file]
        else:
            notes = self.find_publishable_notes()
        
        print(f"Found {len(notes)} notes to sync")
        
        # Track stats
        blog_count = 0
        garden_count = 0
        all_assets = []
        
        for note_path in notes:
            slug, content, output_dir, assets = self.process_note(note_path)
            all_assets.extend(assets)
            
            output_path = output_dir / f"{slug}.md"
            
            # Track counts
            if 'blog' in str(output_dir):
                blog_count += 1
            else:
                garden_count += 1
            
            if dry_run:
                print(f"[DRY RUN] Would write: {output_path}")
                print(f"[DRY RUN] Assets: {[a.name for a in assets]}")
            else:
                output_path.write_text(content)
                print(f"âœ“ Synced: {note_path.name} â†’ {output_path}")
        
        # Copy assets
        for asset_path in all_assets:
            dest = self.assets_dir / asset_path.name
            if dry_run:
                print(f"[DRY RUN] Would copy asset: {asset_path} â†’ {dest}")
            else:
                shutil.copy2(asset_path, dest)
                print(f"âœ“ Copied asset: {asset_path.name}")
        
        print(f"\nSummary: {blog_count} blog posts, {garden_count} garden notes, {len(all_assets)} assets")
        
        # Git operations
        if not dry_run and self.config['git_auto_commit']:
            self._git_commit_and_push()
    
    def _git_commit_and_push(self):
        """Commit and push changes to GitHub."""
        import subprocess
        
        date_str = datetime.now().strftime('%Y-%m-%d %H:%M')
        message = self.config['git_commit_message'].format(date=date_str)
        
        subprocess.run(['git', 'add', '.'], cwd=self.quartz_root, check=True)
        subprocess.run(['git', 'commit', '-m', message], cwd=self.quartz_root, check=True)
        subprocess.run(['git', 'push'], cwd=self.quartz_root, check=True)
        
        print(f"âœ“ Committed and pushed: {message}")

def main():
    parser = argparse.ArgumentParser(description='Sync Obsidian notes to Quartz blog')
    parser.add_argument('--config', default='.claude/skills/publish/config.yaml',
                        help='Path to config file')
    parser.add_argument('--dry-run', action='store_true',
                        help='Preview changes without applying')
    parser.add_argument('--file', type=Path,
                        help='Sync specific file only')
    
    args = parser.parse_args()
    
    sync = VaultSync(args.config)
    sync.sync(dry_run=args.dry_run, specific_file=args.file)

if __name__ == '__main__':
    main()
```

---

## Phase 3: Migration Execution Plan

### Step-by-Step Checklist

#### Pre-Migration (Do Not Skip)
- [ ] **Backup**: Clone fresh copy of 1activegeek.github.io to backup location
- [ ] **Document URLs**: Confirm all 7 existing post URLs + about page
- [ ] **Export Comments**: Decide on Disqus (keep/migrate/remove)
- [ ] **Create Branch**: `git checkout -b quartz-migration` or create new repo

#### Migration
- [ ] **Initialize Quartz**: `npx quartz create` in target directory
- [ ] **Copy Assets**: Migrate `/img/` folder to `content/img/`
- [ ] **Run Migration Script**: Convert all Jekyll posts to `content/blog/`
- [ ] **Create Garden Structure**: Set up `content/garden/` directory
- [ ] **Configure Aliases**: Ensure all `redirect_from` paths become Quartz `aliases`
- [ ] **Set Up Custom Components**: Create BlogListing and GardenExplorer components
- [ ] **Test Locally**: `npx quartz build --serve` and verify all URLs work
- [ ] **Configure Domain**: Ensure CNAME file has `1activegeek.com`
- [ ] **Update GitHub Actions**: Replace Jekyll workflow with Quartz workflow

#### Post-Migration
- [ ] **Test Redirects**: Verify old `/blog/geek/...` URLs redirect correctly
- [ ] **Verify Assets**: Check images load correctly in posts
- [ ] **Test Both Sections**: Verify blog and garden sections work
- [ ] **Update DNS** (if needed): Confirm CNAME/A records still valid
- [ ] **Merge/Deploy**: Merge quartz-migration branch to master (or switch repo)
- [ ] **Monitor**: Watch GitHub Actions for successful build
- [ ] **Verify Live**: Test 1activegeek.com thoroughly

#### Vault Integration
- [ ] **Update Templates**: Add `section`, `publish`, and `slug` fields
- [ ] **Create Garden Template**: For digital garden notes
- [ ] **Create Publish Skill**: Write all skill files
- [ ] **Test Sync**: Run sync script in dry-run mode
- [ ] **Publish Test Content**: 
  - Create blog post with `section: blog`, sync, verify on homepage
  - Create garden note with `section: garden`, sync, verify in garden

---

## Design System (Hybrid Edition)

### Visual Identity

**Two Personalities, One System:**

1. **Blog Personality** - Magazine Editorial
   - Spacious, image-forward
   - Card-based grid layouts
   - Clear visual hierarchy
   - Feature highlights

2. **Garden Personality** - Dense & Interconnected
   - Compact, information-dense
   - Graph visualization prominent
   - Backlinks emphasized
   - "Living document" aesthetic

**Shared Foundation:**
- **Typography**: Inter (400, 500, 600, 700)
- **Colors**: Professional blue accent (#0066cc light, #4d9fff dark)
- **Spacing**: Consistent rhythm across both sections
- **Animations**: Snappy 100ms transitions
- **Mobile**: Responsive breakpoints at 768px

**Color Palette:**
- **Light Mode**:
  - Background: `#fafafa`
  - Text: `#171717`
  - Accent: `#0066cc`
  - Muted: `#737373`
  - Borders: `#e5e5e5`
  
- **Dark Mode**:
  - Background: `#0a0a0a`
  - Text: `#f5f5f5`
  - Accent: `#4d9fff`
  - Muted: `#a3a3a3`
  - Borders: `#262626`

---

## Questions to Resolve Before Implementation

### Technical Decisions

1. **Repository Strategy**:
   - **Option A**: Create new branch `quartz` in existing repo, test, then merge to `master`
   - **Option B**: Create entirely new repo (e.g., `github.com/1activegeek/quartz-blog`), keep Jekyll as backup
   - **Option C**: Archive Jekyll repo, convert 1activegeek.github.io to Quartz directly

2. **Comments System**:
   - **Option A**: Keep Disqus (migrate existing comments)
   - **Option B**: Switch to Giscus (GitHub Discussions-based, more privacy-friendly)
   - **Option C**: Remove comments entirely (simpler, cleaner)

3. **Cross-Linking Between Sections**:
   - **Option A**: Blog posts can link to garden notes (bidirectional)
   - **Option B**: Keep sections isolated (no cross-links)
   - **Option C**: Garden notes can reference blog posts only (one way)

4. **Garden Note URLs**:
   - **Option A**: Flat structure (`/garden/note-slug/`)
   - **Option B**: Date-based (`/garden/2026/01/note-slug/`)
   - **Option C**: Tag-based folders (`/garden/docker/note-slug/`)

### Design Decisions

5. **Blog Homepage Layout**:
   - **Option A**: Simple chronological list (like current Jekyll)
   - **Option B**: Card grid with featured images (recommended)
   - **Option C**: Magazine-style with hero featured post + grid

6. **Garden Graph Visibility**:
   - **Option A**: Always visible on garden pages
   - **Option B**: Toggle/collapsible by user
   - **Option C**: Only on garden landing page

7. **Growth Stages in Garden**:
   - **Option A**: Visual badges (ğŸŒ± ğŸŒ¿ ğŸŒ³) for note maturity
   - **Option B**: Tag-based (#seedling #budding #evergreen)
   - **Option C**: No maturity indication

### Operational Decisions

8. **Sync Automation**:
   - **Option A**: Manual only (run `/publish` command when ready)
   - **Option B**: Scheduled (cron job runs daily/hourly)
   - **Option C**: Git hook (sync on vault commit - may be too frequent)

9. **Google Analytics**:
   - **Option A**: Keep existing UA-97873060-1
   - **Option B**: Upgrade to GA4 (recommended, UA is deprecated)
   - **Option C**: Remove tracking (privacy-focused)

10. **RSS Feeds**:
    - **Option A**: Single feed for all content
    - **Option B**: Separate feeds (blog.rss, garden.rss)
    - **Option C**: Blog feed only (exclude garden notes)

---

## Recommended Decisions

Based on your stated goals and existing site analysis:

| Decision | Recommendation | Reasoning |
|----------|----------------|-----------|
| Repository | **Option A** (branch then merge) | Clean history, easy rollback |
| Comments | **Option B** (Giscus) | Privacy-friendly, free, modern |
| Cross-Linking | **Option A** (bidirectional) | Rich connections between content |
| Garden URLs | **Option A** (flat) | Simple, memorable, Quartz-native |
| Blog Homepage | **Option B** (card grid) | Modern feel, image support |
| Garden Graph | **Option A** (always visible) | Core garden feature |
| Growth Stages | **Option A** (visual badges) | Quick visual scanning |
| Sync | **Option A** (manual) | Full control over what's published |
| Analytics | **Option B** (GA4) | Future-proof |
| RSS | **Option C** (blog only) | Clean separation of concerns |

---

## Success Metrics

After implementation, the system should:

- âœ… All 7 existing Jekyll posts accessible at exact same URLs
- âœ… All Jekyll redirects (`/blog/geek/...`) working via Quartz aliases
- âœ… Custom domain `1activegeek.com` serving Quartz site
- âœ… Blog section displays magazine-style card grid
- âœ… Garden section shows graph view and interconnected notes
- âœ… New posts from Obsidian route to correct section via `section` field
- âœ… Unlisted posts accessible by direct URL but not indexed
- âœ… Mobile-responsive design with dark mode in both sections
- âœ… <3 second page load times
- âœ… Successful GitHub Actions deployment on every push

---

## File Creation Summary

**Files to create in this repo (lifeOS vault):**

| File | Path |
|------|------|
| SKILL.md | `.claude/skills/publish/SKILL.md` |
| config.yaml | `.claude/skills/publish/config.yaml` |
| migrate_jekyll.py | `.claude/skills/publish/scripts/migrate_jekyll.py` |
| sync_to_quartz.py | `.claude/skills/publish/scripts/sync_to_quartz.py` |
| Template update | `3 Resources/Templates/Template - New Note.md` |
| Blog template | `3 Resources/Templates/Template - Blog Post.md` |
| Garden template | `3 Resources/Templates/Template - Garden Note.md` |

**Files to create in Quartz repo (1activegeek.github.io):**

| File | Path |
|------|------|
| quartz.config.ts | `quartz.config.ts` |
| custom.scss | `quartz/styles/custom.scss` |
| BlogListing.tsx | `quartz/components/BlogListing.tsx` |
| GardenExplorer.tsx | `quartz/components/GardenExplorer.tsx` |
| deploy.yml | `.github/workflows/deploy.yml` |
| Blog index | `content/index.md` |
| Garden index | `content/garden/index.md` |
| Migrated posts | `content/blog/*.md` (7 posts) |
| About page | `content/about.md` |
| Images | `content/img/*` (copied from Jekyll) |

---

## Next Steps

Ready to begin implementation when you confirm:

1. **Repository approach** (branch vs new repo)
2. **Comment system** (Giscus vs Disqus vs none)
3. **Cross-linking policy** between blog and garden
4. **Any design references** (sites you like the aesthetic of)
5. **Priority**: Migrate existing content first, or build Obsidian sync first?

The hybrid plan is comprehensive and ready for execution. This approach gives you the best of both worlds: a polished, magazine-style blog for your main content, plus a rich, interconnected digital garden for notes and references - all powered by the same Obsidian vault with simple frontmatter controls.